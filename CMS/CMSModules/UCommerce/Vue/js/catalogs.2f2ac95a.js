(function(e){function t(t){for(var i,o,a=t[0],c=t[1],l=t[2],u=0,h=[];u<a.length;u++)o=a[u],s[o]&&h.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},s={catalogs:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;r.push([1,"chunk-vendors"]),n()})({"03ad":function(e,t,n){"use strict";var i=n("8030"),s=n.n(i);s.a},"0682":function(e,t,n){},"0f23":function(e,t,n){"use strict";var i=n("3f2a"),s=n.n(i);s.a},1:function(e,t,n){e.exports=n("1d1a")},"1d1a":function(e,t,n){"use strict";n.r(t);n("cd13"),n("30a0"),n("0c35"),n("912f"),n("bdde"),n("d9ae");var i,s,r=n("15a6"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},a=[],c=n("a4bb"),l=n.n(c),d=n("cebc"),u=(n("85aa"),n("3b8d")),h={Umbraco:{"--selection-color":"","--header-bg":"","--header-border":"","--header-color":""},Sitecore:{"--selection-color":"#de232f","--header-bg":"#de232f","--header-border":"none","--header-color":"#fff"},Kentico:{"--selection-color":"#d0e8ed","--header-bg":"#d6d9d6","--header-border":"none","--header-color":""},Sitefinity:{"--selection-color":"#e6f2f8","--header-bg":"#fff","--header-border":"none","--header-color":""}},g=n("7b6e"),f={name:"root-app",created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("system/information");case 2:t=e.sent,this.applyCMSTheme(t.data.cms),this.setSystemInfo(t.data);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:Object(d["a"])({},Object(g["d"])(["setSystemInfo"]),{applyCMSTheme:function(e){var t=document.documentElement,n=h[e];l()(n).forEach(function(e){t.style.setProperty(e,n[e])})}})},p=f,m=n("2877"),v=Object(m["a"])(p,o,a,!1,null,null,null),b=v.exports,y=n("8054"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"catalogs",class:{dragging:e.dragging}},[e._m(0),n("section",{staticClass:"catalogs__builder-outer"},[n("cat-builder",{ref:"builder"}),n("div",{staticClass:"catalogs__builder-resize-outer"},[n("div",{staticClass:"catalogs__builder-resize-inner",on:{mousedown:e.onMousedown}})])],1),n("details-view",{on:{deleted:e.selectParent}})],1)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"catalogs__header"},[n("h1",[e._v("Catalogs")])])}],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("store-selector"),n("section",{ref:"builder",staticClass:"cat-builder",on:{click:e.setFocus,keydown:[e.keydownHandler,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideCreate(t)}]}},[n("div",{ref:"inner",staticClass:"cat-builder__inner",style:{transform:e.xPosition}},[n("div",{staticClass:"cat-builder__header"}),e._l(e.treeSections,function(t,i){return n("tree-section",{key:i,ref:"section",refInFor:!0,attrs:{section:t},on:{nodeSelected:e.nodeSelected,nodeDropped:e.nodeDropped,nodeCreated:e.nodeCreated,needsMoreCats:e.loadMoreCats}})})],2),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showScroll,expression:"showScroll"}],staticClass:"builder__scrollbar"},[n("div",{ref:"scroller",staticClass:"builder__scroll-handle",class:{scrolling:e.scrolling},style:{width:e.scrollerWidthPercent+"%",transform:"translate3d("+e.scrollerPosition+"px, 0, 0)"}})])])],1)],1)},S=[],x=n("e814"),T=n.n(x),I=(n("009d"),n("c875"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uc-select",{staticClass:"store-selector",attrs:{label:"Stores",options:e.stores,selected:e.selectedStore,placeholder:"Select a store"},on:{selected:e.setSelectedStore}})}),O=[],D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-select",class:{readonly:e.readonly}},[e.label?n("label",{staticClass:"uc-select__label input-label",attrs:{for:e.id}},[e._v(e._s(e.label))]):e._e(),n("div",{staticClass:"uc-select__selected",attrs:{id:e.id},on:{click:e.toggleOptions}},[e._v(e._s(e.selectedText))]),n("div",{staticClass:"uc-select__arrow",class:{toggled:e.optionsToggled},on:{click:e.toggleOptions}},[n("triangle")],1),n("transition",{attrs:{name:"dropdown"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"uc-select__options dropdown-overlay"},e._l(e.filteredOptions,function(t){return n("li",{key:t.value,staticClass:"uc-select__option",on:{click:function(n){return e.selectOption(t)}}},[e._v(e._s(t.text))])}),0)])],1)},k=[],j=(n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"}},[n("title",[e._v("triangle right")]),n("g",[n("path",{attrs:{d:"M14,7.999c0-0.326-0.159-0.632-0.427-0.819l-10-7C3.269-0.034,2.869-0.058,2.538,0.112 C2.207,0.285,2,0.626,2,0.999v14.001c0,0.373,0.207,0.715,0.538,0.887c0.331,0.17,0.73,0.146,1.035-0.068l10-7 C13.841,8.633,14,8.327,14,8.001C14,8,14,8,14,7.999C14,8,14,8,14,7.999z"}})])])}),N=[],G={},P=Object(m["a"])(G,j,N,!1,null,null,null),$=P.exports,M=(n("6b54"),n("06db"),function(){return"id"+Math.random().toString(36).slice(2,9)}),E={name:"uc-select",data:function(){return{id:0,optionsToggled:!1}},props:{options:Array,selected:String,label:String,placeholder:{Type:String,default:"Select an option"},readonly:Boolean},computed:{selectedOption:function(){var e=this;return this.options?this.options.find(function(t){return t.value===e.selected}):""},selectedText:function(){return this.selectedOption?this.selectedOption.text:this.placeholder},showOptions:function(){return this.optionsToggled&&!this.readonly&&this.options.length>0},filteredOptions:function(){var e=this;return this.options.filter(function(t){return t!==e.selectedOption})}},methods:{toggleOptions:function(e){var t=this;this.readonly||(e.preventDefault(),this.optionsToggled=!this.optionsToggled,this.optionsToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10))},selectOption:function(e){this.readonly||(this.$emit("selected",e),this.optionsToggled=!1)},closeHandler:function(e){this.optionsToggled=!1,window.removeEventListener("click",this.closeHandler)}},components:{Triangle:$},created:function(){this.id=M()}},H=E,L=(n("a970"),Object(m["a"])(H,D,k,!1,null,null,null)),W=L.exports,V=(n("fb40"),function(e){return e.map(function(e){return{text:e.name,value:e.guid}})}),B=Object(g["a"])("builder"),R=B.mapGetters,z=B.mapMutations,Y={name:"store-selector",components:{UcSelect:W},computed:Object(d["a"])({},R(["selectedStore","stores"])),methods:Object(d["a"])({},z(["setSelectedStore","setStores"]),{getStores:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/stores");case 2:if(t=e.sent,n=V(t.data),this.setStores(n),this.stores.length){e.next=7;break}return e.abrupt("return");case 7:this.setSelectedStore(this.stores[0]);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),created:function(){this.getStores()}},U=Y,A=(n("b19a"),Object(m["a"])(U,I,O,!1,null,null,null)),F=A.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"section",staticClass:"cat-builder__section",style:{width:e.sectionWidth+"px",height:e.sectionHeight+"px"},on:{dragenter:e.sectionEnter,mouseenter:e.mouseenterHandler,mouseleave:e.mouseleaveHandler}},[n("header",{class:e.sectionClasses,on:{dragenter:e.headerDragenter,dragleave:e.headerDragleave,dragover:e.headerDragover,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.headerDrop(t)}}},[n("span",[e._v(e._s(e.section.name))])]),n("div",{ref:"body",staticClass:"section__body",on:{dragover:e.bodyDragover,drop:e.bodyDrop,scroll:e.checkIfMoreItemsNeeded}},[n("div",{ref:"target",staticClass:"section__drop-target",class:e.targetClasses,on:{transitionend:e.targetTransitionEnded,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.targetDrop(t)},dragover:function(t){return t.preventDefault(),e.targetDragover(t)}}}),e._l(e.section.categories,function(t,i){return n("tree-node",{key:t.guid,ref:"node",refInFor:!0,attrs:{cat:t,"parent-guid":e.section.guid,"cat-index":i},on:{selected:function(t){return e.$emit("nodeSelected",t)},nodeDropped:e.nodeDropped,targetBefore:e.showDropzone,targetAfter:e.showDropzone,hideTarget:function(t){return e.setTargetVisible(!1)}}})}),n("div",{ref:"remaining",staticClass:"section__remaining-items-placeholder",style:e.remainingItemsStyle})],2),n("transition",{attrs:{name:"fade"}},[n("create-node",{directives:[{name:"show",rawName:"v-show",value:e.showCreateTriggerComp,expression:"showCreateTriggerComp"}],ref:"creator",attrs:{nodeType:e.sectionNodeType,parentInfo:e.createPayload},on:{nodeCreated:function(t){return e.$emit("nodeCreated",t)}}})],1)],1)},J=[],q=n("bd86"),K="productCatalog",Q="productCategory",Z="store",ee=(i={},Object(q["a"])(i,K,"catalogs"),Object(q["a"])(i,Q,"categories"),Object(q["a"])(i,Z,"stores"),i),te=(s={},Object(q["a"])(s,K,"catalog"),Object(q["a"])(s,Q,"category"),s),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"node",staticClass:"cat-builder__node",class:e.classes,attrs:{tabindex:"0",id:e.cat.guid,draggable:"true"},on:{click:e.clickHandler,focus:e.select,dragstart:e.dragstartHandler,dragend:e.dragendHandler,dragenter:e.dragenterHandler,dragleave:e.dragleaveHandler,dragover:e.dragoverHandler,drop:function(t){return t.preventDefault(),t.stopPropagation(),e.dropHandler(t)}}},[n("span",[e._v(e._s(e.cat.name))]),n("right-arrow",{directives:[{name:"show",rawName:"v-show",value:e.cat.hasChildren,expression:"cat.hasChildren"}]})],1)},ie=[],se=(n("3876"),Object(g["a"])("builder")),re=se.mapGetters,oe=se.mapMutations,ae={name:"tree-node",data:function(){return{dragShiftThreshold:8,hoverMsBeforeLoad:1e3,lastDragEmit:null,dragOverTimestamp:null,emitTypes:{showTargetBefore:"targetBefore",showTargetAfter:"targetAfter",hideTarget:"hideTarget",selected:"selected",changeSection:"changeSection"},isDropzone:!1,dragClone:null}},props:{cat:Object,catIndex:Number,parentGuid:String},computed:Object(d["a"])({},re(["dragInfo","treeSections"]),{classes:function(){return{selected:this.cat.selected,displaying:this.cat.displaying,dragging:this.dragging,dropzone:this.isDropzone}},dragging:function(){return this.dragInfo.dragging&&this.dragInfo.node.guid===this.cat.guid},height:function(){return this.$el.clientHeight},canDrop:function(){return!!this.dragInfo.dragging&&(this.cat.guid!==this.dragInfo.node.guid&&(this.dragInfo.node.nodeType!==K&&this.dragInfo.node.guid!==this.parentGuid))}}),components:{RightArrow:$},methods:Object(d["a"])({},oe(["setDragInfo","endDrag"]),{clickHandler:function(e){e.stopPropagation(),this.setFocus()},setFocus:function(){this.$el.focus()},dragstartHandler:function(e){var t={dragging:!0,node:this.cat,catIndex:this.catIndex,parentGuid:this.parentGuid,currentSectionGuid:this.parentGuid};this.setDragInfo(t),this.dragClone=this.$el.cloneNode(!0),this.dragClone.classList.add("drag-clone"),this.dragClone.id="",document.body.appendChild(this.dragClone),e.dataTransfer.setData("text","anything"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(this.dragClone,e.offsetX,e.offsetY)},dragendHandler:function(){this.endDrag(),document.body.removeChild(this.dragClone),this.dragClone=null},dragenterHandler:function(){this.canDrop&&(this.isDropzone=!0)},dragleaveHandler:function(){this.isDropzone=!1},dragoverHandler:function(e){if(this.cat.guid!==this.dragInfo.node.guid&&(e.offsetY<this.dragShiftThreshold?this.emitDragEvent(this.emitTypes.showTargetBefore,this.catIndex):e.offsetY>this.height-this.dragShiftThreshold?this.emitDragEvent(this.emitTypes.showTargetAfter,this.catIndex+1):this.emitDragEvent(this.emitTypes.hideTarget)),this.canDrop){if(e.preventDefault(),e.dataTransfer.dropEffect="move",null===this.dragOverTimestamp)return void(this.dragOverTimestamp=e.timeStamp);window.performance.now()-this.dragOverTimestamp>this.hoverMsBeforeLoad&&(this.dragOverTimestamp=e.timeStamp,this.select())}},dropHandler:function(e){if(this.isDropzone=!1,this.canDrop){var t={parentGuid:this.cat.guid,sortOrder:null,newIndex:-1,catalogGuid:this.cat.nodeType===K?this.cat.guid:void 0};this.$emit("nodeDropped",t)}},emitDragEvent:function(e,t){this.lastDragEmit!==e&&(this.lastDragEmit=e,this.$emit(e,t))},select:function(){this.$emit(this.emitTypes.selected,{parentGuid:this.parentGuid,cat:this.cat})}})},ce=ae,le=(n("7c69"),Object(m["a"])(ce,ne,ie,!1,null,null,null)),de=le.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"builder__create",class:{toggled:e.inputVisible},on:{click:function(e){e.stopPropagation()}}},[n("a",{directives:[{name:"show",rawName:"v-show",value:!e.inputVisible,expression:"!inputVisible"}],staticClass:"builder__create__link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showInput(t)}}},[e._v(e._s(e.addLabel))]),n("form",{directives:[{name:"show",rawName:"v-show",value:e.inputVisible,expression:"inputVisible"}],staticClass:"builder__create__form",on:{submit:function(t){return t.preventDefault(),e.createNewNode(t)}}},[n("uc-text",{ref:"input",attrs:{placeholder:e.placeholder,value:e.newName},on:{input:e.updateName}}),n("div",[n("uc-button",{attrs:{text:"Add",type:"submit",primary:!0}}),n("uc-button",{staticClass:"builder__create__cancel",attrs:{text:"Cancel",primary:!1},on:{click:e.hideInput}})],1)],1)])},he=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-text-input"},[e.label?n("label",{staticClass:"uc-text-input__label input-label",attrs:{for:e.id}},[e._v(e._s(e.label))]):e._e(),n("input",{ref:"field",staticClass:"uc-text-input__input",attrs:{type:"text",id:e.id,disabled:e.readonly,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.emitValue}})])},fe=[],pe={name:"uc-text-input",data:function(){return{id:null}},props:{label:String,placeholder:String,value:String,readonly:Boolean},methods:{emitValue:function(e){this.$emit("input",e.target.value)},focus:function(){this.$refs.field.focus()}},created:function(){this.id=M()}},me=pe,ve=(n("3d4d"),Object(m["a"])(me,ge,fe,!1,null,null,null)),be=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"uc-button",class:{primary:e.primary},attrs:{type:e.type},on:{click:e.clicked}},[e._v(e._s(e.text))])},we=[],Ce={name:"uc-button",props:{text:String,disabled:Boolean,primary:Boolean,type:String},methods:{clicked:function(e){this.$emit("click",e)}}},_e=Ce,Se=(n("0f23"),Object(m["a"])(_e,ye,we,!1,null,null,null)),xe=Se.exports,Te=Object(g["a"])("builder"),Ie=Te.mapGetters,Oe={name:"create-node",data:function(){return{inputVisible:!1,newName:""}},props:{nodeType:String,parentInfo:Object},components:{UcText:be,UcButton:xe},computed:Object(d["a"])({},Ie(["selectedStore"]),{addLabel:function(){return"Add new ".concat(te[this.nodeType]," (c)")},placeholder:function(){return"C".concat(te[this.nodeType].substr(1)," name")}}),methods:{showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick().then(function(){e.$refs.input.focus()})},hideInput:function(){this.inputVisible=!1},updateName:function(e){this.newName=e},createNewNode:function(){var e=this;if(this.newName.trim().length){var t=Object(d["a"])({},this.parentInfo,{sortOrder:0,name:this.newName});this.nodeType===K&&(t.storeGuid=this.selectedStore),this.axios.post("".concat(ee[this.nodeType]),t).then(function(){e.newName="",e.$emit("nodeCreated",{isCatalog:e.nodeType===K,parentGuid:e.parentInfo.parentGuid}),e.$refs.input.focus()})}}}},De=Oe,ke=(n("b420"),Object(m["a"])(De,ue,he,!1,null,null,null)),je=ke.exports,Ne=Object(g["a"])("builder"),Ge=Ne.mapGetters,Pe=Ne.mapMutations,$e={name:"tree-section",data:function(){return{targetVisible:!1,targetTransitioning:!1,targetIndex:0,headerEnterTimer:null,showCreateTrigger:!1}},props:{section:Object},computed:Object(d["a"])({},Ge(["sectionWidth","sectionHeight","dragInfo","selectedCatalog","displayedNodePosition"]),{targetClasses:function(){return{show:this.showTarget,transitions:this.dragInfo.dragging}},remainingItemsStyle:function(){var e=this.section.categories.length&&this.section.categoriesCount&&!this.section.endOfList?35:0,t=e*(this.section.categoriesCount-this.section.categories.length);return{height:"".concat(t,"px")}},sectionClasses:function(){return{"no-drop":!this.canDrop}},canDrop:function(){return!!this.dragInfo.dragging&&this.dragInfo.node.guid!==this.section.guid},isSectionOfOrigin:function(){return this.dragInfo.parentGuid===this.section.guid},draggingCategoryIntoCatalogSection:function(){if(this.dragInfo.dragging)return 0===this.section.position&&this.dragInfo.node.nodeType===Q},showTarget:function(){return this.targetVisible&&this.canDrop&&this.section.guid===this.dragInfo.currentSectionGuid},sectionNodeType:function(){return 0===this.section.position?K:Q},createPayload:function(){var e={};return this.selectedCatalog?(this.sectionNodeType!==Z&&(e.parentCategoryId=this.section.guid===this.selectedCatalog.guid?null:this.section.guid,e.productCatalogId=this.selectedCatalog.guid,e.parentGuid=this.section.guid),e):e},showCreateTriggerComp:function(){return this.showCreateTrigger&&!this.dragInfo.dragging},createVisible:function(){return this.$refs.creator.inputVisible}}),methods:Object(d["a"])({},Pe(["setDragSectionGuid"]),{showCreate:function(){this.createVisible||(this.showCreateTrigger=!0,this.$refs.creator.showInput())},hideCreate:function(){this.createVisible&&(this.$refs.creator.hideInput(),this.showCreateTrigger=!1)},mouseenterHandler:function(){this.showCreateTrigger=!0},mouseleaveHandler:function(){this.$refs.creator.inputVisible||(this.showCreateTrigger=!1,this.$refs.creator.hideInput(!1))},sectionEnter:function(){this.setDragSectionGuid(this.section.guid)},bodyDragover:function(e){this.canDrop&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},bodyDrop:function(e){if(this.canDrop){e.preventDefault();var t=this.section.categories.length,n=t?this.section.categories[t-1].sortOrder+1:0;this.dropNode(n,t)}},targetTransitionEnded:function(e){"height"===e.propertyName&&(this.targetTransitioning=!1)},targetDrop:function(){var e=this.targetIndex;this.isSectionOfOrigin&&this.dragInfo.catIndex<this.targetIndex&&(e=this.targetIndex-1);var t=this.section.categories[e],n=t?t.sortOrder:this.section.categories[this.section.categories.length-1].sortOrder+1;this.dropNode(n,e)},targetDragover:function(e){e.dataTransfer.dropEffect="move"},headerDragenter:function(e){var t=this;this.canDrop&&!this.draggingCategoryIntoCatalogSection&&(this.headerEnterTimer=window.setTimeout(function(){e.target.classList.add("can-drop"),t.setTargetVisible(!1),t.headerEnterTimer=void 0},500))},headerDragleave:function(e){this.headerEnterTimer&&(window.clearTimeout(this.headerEnterTimer),this.headerEnterTimer=void 0),e.target.classList.remove("can-drop")},headerDragover:function(e){this.canDrop&&!this.draggingCategoryIntoCatalogSection&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},headerDrop:function(){this.dropNode(null,-1)},showDropzone:function(e){this.draggingCategoryIntoCatalogSection||this.shiftTargetPosition(e)},setTargetVisible:function(e){var t=this,n=!!this.canDrop&&e;window.requestAnimationFrame(function(){t.targetTransitioning?t.setTargetVisible(n):(t.targetTransitioning=t.targetVisible!==n,t.targetVisible=n)})},shiftTargetPosition:function(e){var t=this;if(this.targetTransitioning)window.setTimeout(function(){t.shiftTargetPosition(e)},32);else if(this.targetIsNextToDraggedItem(e))this.setTargetVisible(!1);else{if(this.targetIndex!==e){var n=this.$refs.node[e]?this.$refs.node[e].$el:null;this.$refs.body.insertBefore(this.$refs.target,n);for(var i=0;i<this.$refs.body.children.length;i++)this.$refs.target===this.$refs.body.children[i]&&(this.targetIndex=i)}this.setTargetVisible(!0)}},targetIsNextToDraggedItem:function(e){return!(!this.section.categories[e]||this.section.categories[e].guid!==this.dragInfo.node.guid)||!(!this.section.categories[e-1]||this.section.categories[e-1].guid!==this.dragInfo.node.guid)},dropNode:function(e,t){var n={parentGuid:this.section.guid,sortOrder:e,newIndex:t};this.$emit("nodeDropped",n)},nodeDropped:function(e){this.$emit("nodeDropped",e)},resetScroll:function(){this.$refs.body.scrollTop=0},getScrollPosition:function(){return this.$refs.body.scrollTop},setScrollPosition:function(e){this.$refs.body.scrollTop=e},checkIfMoreItemsNeeded:function(){var e=this.$refs.remaining,t=this.$refs.body;if(e&&t){var n=e.getBoundingClientRect().top,i=n<2*t.offsetHeight;i&&this.$emit("needsMoreCats",this.section)}}}),components:{TreeNode:de,CreateNode:je}},Me=$e,Ee=(n("b0c5"),Object(m["a"])(Me,X,J,!1,null,null,null)),He=Ee.exports,Le=(n("a2eb"),function(e){var t=e.map(function(e){return e.selected=!1,e.displaying=!1,e});return t.sort(function(e,t){return e.sortOrder-t.sortOrder})}),We=Object(g["a"])("builder"),Ve=We.mapGetters,Be=We.mapMutations,Re={name:"catalog-builder",data:function(){return{builderWidth:0,visibleSections:0,slidePosition:0,sectionClicked:0,scrolling:!1,scrollInit:{mouseX:0,scrollerPos:0,slidePos:0},scrollMove:0,isLoadingMoreItems:!1}},computed:Object(d["a"])({},Ve(["treeSections","displayedNodePosition","sectionWidth","displayedNode","dragInfo","selectedStore"]),{xPosition:function(){return"translate3d(-".concat(this.slidePosition*this.sectionWidth,"px, 0, 0)")},sectionsInTree:function(){return this.treeSections.length},showScroll:function(){return this.sectionsInTree*this.sectionWidth>this.builderWidth+50},scrollerWidthPercent:function(){return this.builderWidth/(this.sectionsInTree*this.sectionWidth)*100},scrollerWhiteSpace:function(){return this.builderWidth-this.scrollerWidthPercent*this.builderWidth/100},scrollerPageSize:function(){return this.scrollerWhiteSpace/(this.sectionsInTree-this.visibleSections)},scrollerPosition:function(){if(!this.scrolling){var e=this.scrollerPageSize*this.slidePosition;return e}return this.scrollMove}}),watch:{selectedStore:function(){this.getCatalogs()}},methods:Object(d["a"])({},Be(["setSectionWidth","setSectionsInTree","addItemsToSectionInTree","selectNode","setRecentDrop","moveDraggedNode"]),{loadMoreCats:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.endOfList){e.next=2;break}return e.abrupt("return");case 2:if(!this.isLoadingMoreItems){e.next=4;break}return e.abrupt("return");case 4:if(this.isLoadingMoreItems=!0,e.prev=5,0!==t.position){e.next=11;break}return e.next=9,this.getMoreCatalogs(t);case 9:e.next=13;break;case 11:return e.next=13,this.getMoreCategories(t);case 13:return e.prev=13,this.isLoadingMoreItems=!1,e.finish(13);case 16:n=this.$refs.section[t.position],n&&n.checkIfMoreItemsNeeded.bind(n)();case 18:case"end":return e.stop()}},e,this,[[5,,13,16]])}));function t(t){return e.apply(this,arguments)}return t}(),getCatalogs:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=25,e.next=3,this.axios.get("/stores/".concat(this.selectedStore,"/catalogs?limit=").concat(t));case 3:n=e.sent,i=Le(n.data),s={position:0,cat:{name:"Catalogs",nodeType:"store",guid:this.selectedStore},elements:i,categoriesCount:+n.headers["x-total-count"]},this.setSectionsInTree(s),i.length&&this.selectNodeWithPosition(0,0),this.resetScroll(1);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getMoreCatalogs:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=100,n=n||t.categories[t.categories.length-1].guid,e.next=4,this.axios.get("/stores/".concat(this.selectedStore,"/catalogs?limit=").concat(i,"&marker=").concat(n));case 4:s=e.sent,r=Le(s.data),o={position:0,cat:t,elements:r,categoriesCount:+s.headers["x-total-count"]},this.addItemsToSectionInTree(o);case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),selectParent:function(){var e=this;if(this.displayedNode.nodeType!==K){var t=this.displayedNodePosition.section-1,n=this.treeSections[t].categories.findIndex(function(e){return e.selected});this.selectNodeWithPosition(t,n)}else this.getCatalogs().then(function(t){t.length&&e.selectNodeWithPosition(0,0)})},setWidth:function(){this.builderWidth=this.$refs.builder.offsetWidth,this.visibleSections=Math.round(this.builderWidth/300),this.setSectionWidth(Math.ceil(this.builderWidth/this.visibleSections))},nodeSelected:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.cat,i=t.parentGuid,s=this.treeSections.findIndex(function(e){return e.guid===i}),this.selectNode({parentGuid:i,catGuid:n.guid}),e.next=5,this.getCategories(n,s);case 5:this.sectionClicked=s;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),nodeDropped:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var n,i,s,r,o,a,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this.treeSections[0].categories.find(function(e){return e.selected}),i=t.catalogGuid||n.guid,s=this.dragInfo.node.guid,r=this.dragInfo.parentGuid===t.parentGuid,o=t.parentGuid===t.catalogGuid?0:this.treeSections.findIndex(function(e){return e.guid===t.parentGuid}),a=this.getSectionScrollPosition(o),c={sortOrder:t.sortOrder,parentCategoryGuid:t.parentGuid===i?null:t.parentGuid,productCatalogGuid:i},e.next=9,this.axios.patch("".concat(ee[this.dragInfo.node.nodeType],"/").concat(this.dragInfo.node.guid),c);case 9:if(this.moveDraggedNode(t),t.parentGuid!==t.catalogGuid){e.next=13;break}return e.next=13,this.getCatalogs();case 13:l=r?s:t.parentGuid,this.selectNodeWithGuid(l),this.setFocus(),this.setSectionScrollPosition(o,a);case 17:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSectionScrollPosition:function(e){return this.$refs.section[e]?this.$refs.section[e].getScrollPosition():0},setSectionScrollPosition:function(e,t){if(this.$refs.section[e])return this.$refs.section[e].setScrollPosition(t)},getCategories:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=ee[t.nodeType],s=25,e.next=4,this.axios.get("/".concat(i,"/").concat(t.guid,"/categories?limit=").concat(s));case 4:r=e.sent,o=Le(r.data),a={position:n+1,elements:o,cat:t,categoriesCount:T()(r.headers["x-total-count"])},this.setSectionsInTree(a),this.setWidth(),this.slideSections(),this.resetScroll(n+1);case 11:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),getMoreCategories:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,n){var i,s,r,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=ee[t.nodeType],n=n||t.categories[t.categories.length-1].guid,s=100,e.next=5,this.axios.get("/".concat(i,"/").concat(t.guid,"/categories?limit=").concat(s,"&marker=").concat(n));case 5:r=e.sent,o=Le(r.data),a={position:t.position,elements:o,cat:t,categoriesCount:T()(r.headers["x-total-count"])},this.addItemsToSectionInTree(a),this.setWidth(),this.slideSections();case 11:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),resetScroll:function(e){var t=this.$refs.section;t&&t.length>e&&t[e].resetScroll()},setFocus:function(e){if(!e||!e.target.classList.contains("cat-builder__node")){var t=document.getElementById(this.displayedNode.guid);t&&t.focus()}},slideSections:function(){var e=this.slidePosition+this.visibleSections-1;this.sectionClicked===e&&this.sectionsInTree>e+1?this.slidePosition+=1:this.slidePosition=Math.max(this.sectionsInTree-this.visibleSections,0)},selectNodeWithPosition:function(e,t){var n=Math.min(Math.max(e,0),this.sectionsInTree-1),i=this.treeSections[n],s=Math.min(Math.max(t,0),i.categories.length-1);this.nodeSelected({cat:i.categories[s],parentGuid:i.guid}),this.setFocus()},selectNodeWithGuid:function(e){e:for(var t=0;t<this.treeSections.length;t++)for(var n=this.treeSections[t],i=0;i<n.categories.length;i++){var s=n.categories[i];if(s.guid===e){this.nodeSelected({cat:s,parentGuid:n.guid});break e}}},setupScrollHandler:function(){var e=this;this.$refs.scroller.addEventListener("mousedown",function(t){e.scrollInit.scrollerPos=e.scrollerPosition,e.scrollInit.mouseX=t.clientX,e.scrollInit.slidePos=e.slidePosition,e.scrollMove=e.scrollerPosition,e.scrolling=!0,window.addEventListener("mousemove",e.scrollMoveHandler)}),window.addEventListener("mouseup",function(t){e.scrolling=!1,window.removeEventListener("mousemove",e.scrollMoveHandler),window.onmousemove=null})},scrollMoveHandler:function(e){e.preventDefault();var t=e.clientX-this.scrollInit.mouseX;this.scrollMove=Math.min(Math.max(t+this.scrollInit.scrollerPos,0),this.scrollerWhiteSpace);var n=Math.round((this.scrollMove-this.scrollInit.scrollerPos)/this.scrollerPageSize);this.slidePosition=this.scrollInit.slidePos+n},keydownHandler:function(e){var t=this.displayedNodePosition.section,n=this.displayedNodePosition.index,i=this.$refs.section.findIndex(function(e){return e.createVisible});switch(e.keyCode){case 37:i>-1&&this.showCreateInSection(Math.max(i-1,0)),i>t||(t-=1);break;case 38:n-=1;break;case 39:if(i>-1){var s=this.treeSections.length-1;this.showCreateInSection(Math.min(i+1,s))}this.treeSections[t+1].categories.length&&(t+=1);break;case 40:n+=1;break;case 67:if(i>-1)return;this.showCreateInSection(t);break;default:return}e.preventDefault(),this.selectNodeWithPosition(t,n)},hideCreate:function(e){for(var t=0;t<this.$refs.section.length;t++)t!==e&&this.$refs.section[t].hideCreate();this.setFocus()},showCreateInSection:function(e){this.hideCreate(e),this.$refs.section[e].showCreate()},nodeCreated:function(e){var t=e.parentGuid,n=e.isCatalog;n?this.getCatalogs():(this.selectNodeWithGuid(t),this.setFocus())}}),components:{StoreSelector:F,TreeSection:He},mounted:function(){var e=this;this.setWidth(),window.addEventListener("resize",function(){e.setWidth(),e.slideSections()}),this.setupScrollHandler()}},ze=Re,Ye=(n("03ad"),Object(m["a"])(ze,_,S,!1,null,null,null)),Ue=Ye.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"details-view"},[n("header",{staticClass:"details-view__header"},[n("div",[n("span",{staticClass:"details__type-label"},[e._v(e._s(e.detailsTypeSingular))]),n("h2",[e._v(e._s(e.details.name))])]),n("div",{staticClass:"details-view__header-right"},[n("uc-select-simple",{attrs:{options:e.languages,selected:e.displayedCulture},on:{selected:e.changeLanguage}}),n("info-widget",[n("label",{staticClass:"input-label"},[e._v("Created")]),n("span",[e._v(e._s(e.details.createdBy))]),n("br"),n("span",[e._v(e._s(e._f("format")(e.details.createdOn,"DD. MMM YYYY",e.locale)))]),n("label",{staticClass:"input-label"},[e._v("Modified")]),n("span",[e._v(e._s(e.details.modifiedBy))]),n("br"),n("span",[e._v(e._s(e._f("format")(e.details.modifiedOn,"DD. MMM YYYY",e.locale)))])]),n("div",{staticClass:"details-view__delete",class:{confirmToggled:e.confirmToggled}},[n("span",{on:{click:e.toggleConfirm}},[e._v("Delete")]),n("transition",{attrs:{name:"popover-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.confirmToggled,expression:"confirmToggled"}],staticClass:"dropdown-overlay details__delete-overlay"},[n("button",{staticClass:"btn danger details__delete-btn",on:{click:e.deleteItem}},[e._v("Yes, delete this")]),n("button",{staticClass:"btn",on:{click:e.toggleConfirm}},[e._v("Cancel")])])])],1)],1)]),n(e.displayedNode.nodeType,{tag:"component",attrs:{language:e.displayedCulture}})],1)},Fe=[],Xe=(n("43ad"),n("029e"),n("768b")),Je=n("795b"),qe=n.n(Je),Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details-catalog"},[n("section",{staticClass:"details__static"},[n("uc-text-input",{attrs:{value:e.details.displayName,label:"Display name ("+e.language+")",readonly:!0}}),n("uc-text-input",{attrs:{value:e.details.name,label:"Internal name",readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show on website",checked:e.details.displayOnWebsite,readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show prices with VAT",checked:e.details.showPricesIncludingVAT,readonly:!0}}),n("uc-select",{attrs:{label:"Default price group",options:e.priceGroups,selected:e.detailsDefaultPriceGroup.guid,readonly:!0}}),n("uc-select",{attrs:{label:"Catalog definition",options:e.catalogDefinitions,selected:e.detailsDefinition.guid,readonly:!0}}),n("div",[n("label",{staticClass:"input-label"},[e._v("Allowed price groups")]),n("div",{staticClass:"details-catalog__pricegroups"},e._l(e.priceGroupCheckboxes,function(e){return n("div",{key:e.value,staticClass:"details-catalog__pricegroup-check"},[n("uc-checkbox",{attrs:{label:e.text,checked:e.checked,value:e.value,readonly:!0}})],1)}),0)])],1)])},Qe=[],Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"uc-checkbox",class:{readonly:e.readonly}},[n("input",{attrs:{type:"checkbox",name:e.id,id:e.id,disabled:e.readonly},domProps:{checked:e.checked},on:{change:e.onChange}}),n("span",{staticClass:"uc-checkbox__label"},[e._v(e._s(e.label))]),n("div",{staticClass:"uc-checkbox__check"},[n("check")],1)])},et=[],tt=n("f0d6"),nt={name:"uc-checkbox",data:function(){return{id:null}},props:{label:String,readonly:Boolean,checked:Boolean,value:String},components:{Check:tt["a"]},methods:{onChange:function(e){this.$emit("change",{checked:e.target.checked,value:this.value})}},created:function(){this.id=M()}},it=nt,st=(n("f146"),Object(m["a"])(it,Ze,et,!1,null,null,null)),rt=st.exports,ot=Object(g["a"])("details"),at=ot.mapGetters,ct={name:"catalog-details",props:{language:String},computed:Object(d["a"])({},at(["details","priceGroups","catalogDefinitions"]),Object(g["c"])(["systemInfo"]),{priceGroupCheckboxes:function(){var e=this;return this.priceGroups.map(function(t){return Object(d["a"])({},t,{checked:!~e.details.allowedPriceGroups.findIndex(function(e){return e.guid===t.guid})})})},detailsDefinition:function(){return this.details.definition||{}},detailsDefaultPriceGroup:function(){return this.details.defaultPriceGroup||{}}}),components:{UcTextInput:be,UcCheckbox:rt,UcSelect:W}},lt=ct,dt=(n("3708"),Object(m["a"])(lt,Ke,Qe,!1,null,null,null)),ut=dt.exports,ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details-category"},[n("section",{staticClass:"details-category__static"},[n("div",[n("uc-image",{attrs:{src:e.details.mediaURL,width:"250px",readonly:!0}})],1),n("div",{staticClass:"details-category__static-right"},[n("uc-text-input",{attrs:{value:e.details.displayName,label:"Display name ("+e.language+")",readonly:!0}}),n("uc-text-input",{attrs:{value:e.details.name,label:"Internal name",readonly:!0}}),n("uc-rich-text",{attrs:{value:e.details.description,label:"Description ("+e.language+")",readonly:!0}}),n("uc-checkbox",{attrs:{label:"Show on website",checked:e.details.displayOnWebsite,readonly:!0}}),n("uc-select",{attrs:{label:"Catalog definition",options:e.categoryDefinitions,selected:e.detailsDefinition.guid,readonly:!0}})],1)])])},gt=[],ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-rich-text"},[e.label?n("label",{staticClass:"input-label"},[e._v(e._s(e.label))]):e._e(),n("div",{ref:"editor"})])},pt=[],mt=n("9339"),vt=n.n(mt),bt={name:"uc-rich-text",data:function(){return{editor:null}},props:{value:{type:String,default:""},theme:{type:String,default:"snow"},readonly:Boolean,placeholder:{type:String,default:"Enter text..."},label:String},mounted:function(){var e=this;this.editor=new vt.a(this.$refs.editor,{theme:this.theme,readOnly:this.readonly,placeholder:this.placeholder}),this.editor.root.innerHTML=this.value,this.editor.on("text-change",function(){return e.update()})},methods:{update:function(){this.$emit("input",this.editor.getText()?this.editor.root.innerHTML:"")}}},yt=bt,wt=(n("cef3"),Object(m["a"])(yt,ft,pt,!1,null,null,null)),Ct=wt.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-image",class:{cover:e.cover,readonly:e.readonly},style:{width:e.width,height:e.height},on:{click:e.clickHandler}},[e.fallback?e._e():n("img",{class:{cover:e.cover},attrs:{src:e.src,alt:e.alt},on:{error:e.showDefault}}),e.fallback?n("camera-icon"):e._e()],1)},St=[],xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"}},[n("title",[e._v("camera ban 37")]),n("g",[n("path",{attrs:{d:"M7,52h0.758l13.913-13.913C20.616,36.301,20,34.225,20,32c0-6.627,5.373-12,12-12 c2.225,0,4.301,0.616,6.087,1.671L45.5,14l-5.7-7.6C39.611,6.148,39.314,6,39,6H25c-0.314,0-0.611,0.148-0.8,0.4L18.5,14H7 c-2.206,0-4,1.794-4,4v30C3,50.206,4.794,52,7,52z"}}),n("path",{attrs:{fill:"#000000",d:"M57,14h-2.758L42.329,25.913C43.384,27.699,44,29.775,44,32c0,6.627-5.373,12-12,12 c-2.225,0-4.301-0.616-6.087-1.671L16.242,52H57c2.206,0,4-1.794,4-4V18C61,15.794,59.206,14,57,14z"}}),n("path",{attrs:{d:"M3,62c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l58-58 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-58,58C3.512,61.902,3.256,62,3,62z"}})])])},Tt=[],It={},Ot=Object(m["a"])(It,xt,Tt,!1,null,null,null),Dt=Ot.exports,kt={name:"uc-image",data:function(){return{fallback:!1}},props:{src:String,alt:String,cover:Boolean,width:{type:String,default:"auto"},height:{type:String,default:"auto"},readonly:Boolean},components:{CameraIcon:Dt},methods:{showDefault:function(){this.fallback=!0},clickHandler:function(){this.$emit("click")}}},jt=kt,Nt=(n("798d"),Object(m["a"])(jt,_t,St,!1,null,null,null)),Gt=Nt.exports,Pt=Object(g["a"])("details"),$t=Pt.mapGetters,Mt={name:"category-details",props:{language:String},computed:Object(d["a"])({},$t(["details","priceGroups","categoryDefinitions"]),Object(g["c"])(["systemInfo"]),{detailsDefinition:function(){return this.details.definition||{}}}),components:{UcTextInput:be,UcCheckbox:rt,UcSelect:W,UcImage:Gt,UcRichText:Ct}},Et=Mt,Ht=(n("525a"),Object(m["a"])(Et,ht,gt,!1,null,null,null)),Lt=Ht.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"details__info"},[n("div",{staticClass:"details__info-wrapper",class:{toggled:e.toggled},on:{click:e.toggleInfo}},[n("div",{staticClass:"details__info-icon"},[e._v("i")]),n("span",{staticClass:"details__header-label"},[e._v("Info")])]),n("transition",{attrs:{name:"popover-right"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.toggled,expression:"toggled"}],staticClass:"dropdown-overlay details__info-dropdown"},[e._t("default")],2)])],1)},Vt=[],Bt={name:"info",data:function(){return{toggled:!1}},methods:{toggleInfo:function(e){var t=this;e.preventDefault(),this.toggled=!this.toggled,this.toggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10)},closeHandler:function(e){this.toggled=!1,window.removeEventListener("click",this.closeHandler)}}},Rt=Bt,zt=(n("a4f4"),Object(m["a"])(Rt,Wt,Vt,!1,null,null,null)),Yt=zt.exports,Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uc-select-simple",class:{readonly:e.readonly}},[n("div",{staticClass:"uc-select-simple__selected",on:{click:e.toggleOptions}},[e._v(e._s(e.selectedText))]),n("div",{staticClass:"uc-select-simple__arrow",class:{toggled:e.optionsToggled},on:{click:e.toggleOptions}},[n("triangle")],1),n("transition",{attrs:{name:"dropdown"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOptions,expression:"showOptions"}],staticClass:"uc-select-simple__options dropdown-overlay"},e._l(e.filteredOptions,function(t){return n("li",{key:t.value,staticClass:"uc-select-simple__option",on:{click:function(n){return e.selectOption(t)}}},[e._v(e._s(t.text))])}),0)])],1)},At=[],Ft={name:"uc-select-simple",data:function(){return{optionsToggled:!1}},props:{options:{type:Array},selected:String,placeholder:{Type:String,default:"Select an option"},readonly:Boolean},computed:{selectedOption:function(){var e=this;return this.options.find(function(t){return t.value===e.selected})},selectedText:function(){return this.selectedOption?this.selectedOption.text:this.placeholder},showOptions:function(){return this.optionsToggled&&!this.readonly&&this.options.length>0},filteredOptions:function(){var e=this;return this.options.filter(function(t){return t!==e.selectedOption})}},methods:{toggleOptions:function(e){var t=this;this.readonly||(e.preventDefault(),this.optionsToggled=!this.optionsToggled,this.optionsToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10))},selectOption:function(e){this.readonly||(this.$emit("selected",e.value),this.optionsToggled=!1)},closeHandler:function(e){this.optionsToggled=!1,window.removeEventListener("click",this.closeHandler)}},components:{Triangle:$}},Xt=Ft,Jt=(n("1e86"),Object(m["a"])(Xt,Ut,At,!1,null,null,null)),qt=Jt.exports,Kt=Object(g["a"])("details"),Qt=Object(g["a"])("builder"),Zt={name:"details-section",data:function(){return{loadDetailsLocked:!1,bufferedDetailsGuid:null,currentDetailsGuid:null,typeNameMap:{productCategory:"Category",productCatalog:"Catalog"},selectedCulture:null,confirmToggled:!1}},computed:Object(d["a"])({},Kt.mapGetters(["details"]),Qt.mapGetters(["displayedNode","dragInfo"]),Object(g["c"])(["systemInfo","languages","locale"]),{detailsTypeSingular:function(){return this.typeNameMap[this.displayedNode.nodeType]},displayedCulture:function(){return this.selectedCulture?this.selectedCulture:this.systemInfo.currentCultureCode}}),watch:{displayedNode:function(){this.dragInfo.dragging||(this.bufferedDetailsGuid=this.displayedNode.guid,this.getDetails())}},components:{productCatalog:ut,productCategory:Lt,UcSelectSimple:qt,InfoWidget:Yt},methods:Object(d["a"])({},Kt.mapMutations(["setDetails","setCatalogDefinitions","setCategoryDefinitions","setPriceGroups"]),{getDetailsBase:function(){return this.axios.get("".concat(ee[this.displayedNode.nodeType],"/details/").concat(this.displayedNode.guid,"/").concat(this.displayedCulture))},getPriceGroups:function(){return"productCategory"===this.displayedNode.nodeType?new qe.a(function(e){e({data:[]})}):this.axios.get("catalogs/pricegroups/".concat(this.displayedNode.guid))},getDetails:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadDetailsLocked){e.next=11;break}return this.loadDetailsLocked=!0,this.currentDetailsGuid=this.displayedNode.guid,t=[this.getDetailsBase(),this.getPriceGroups()],e.next=6,qe.a.all(t);case 6:n=e.sent,i=Object(Xe["a"])(n,2),s=i[0],r=i[1],this.populateDetails(s,r);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),populateDetails:function(e,t){this.loadDetailsLocked=!1,this.currentDetailsGuid===this.bufferedDetailsGuid?(this.setDetails(e.data),this.setPriceGroups(t.data)):this.getDetails()},toggleConfirm:function(e){var t=this;e.preventDefault(),this.confirmToggled=!this.confirmToggled,this.confirmToggled&&window.setTimeout(function(){window.addEventListener("click",t.closeHandler)},10)},deleteItem:function(){var e=this;this.confirmToggled=!1,this.axios.delete("".concat(ee[this.displayedNode.nodeType],"/").concat(this.displayedNode.guid)).then(function(){e.$emit("deleted")})},closeHandler:function(){window.removeEventListener("click",this.closeHandler),this.confirmToggled=!1},changeLanguage:function(e){this.bufferedDetailsGuid=this.displayedNode.guid,this.selectedCulture=e,this.getDetails()}}),created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("".concat(ee[K],"/definitions"));case 2:return t=e.sent,e.next=5,this.axios.get("".concat(ee[Q],"/definitions"));case 5:n=e.sent,this.setCatalogDefinitions(t.data),this.setCategoryDefinitions(n.data);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},en=Zt,tn=(n("d20d"),Object(m["a"])(en,Ae,Fe,!1,null,null,null)),nn=tn.exports,sn=Object(g["a"])("builder"),rn={name:"catalogs",data:function(){return{startY:null,dragging:!1,minHeight:300}},components:{CatBuilder:Ue,DetailsView:nn},computed:Object(d["a"])({},sn.mapGetters(["sectionHeight"])),methods:Object(d["a"])({},sn.mapMutations(["setSectionHeight"]),{onMousedown:function(e){e.preventDefault(),this.startY=e.clientY,this.dragging=!0,window.addEventListener("mousemove",this.onMousemove)},onMousemove:function(e){var t=e.clientY-this.startY;this.startY=e.clientY,this.sectionHeight<this.minHeight&&t<0||this.setSectionHeight(this.sectionHeight+t)},onMouseup:function(){this.dragging=!1,window.removeEventListener("mousemove",this.onMousemove),window.onmousemove=null},selectParent:function(){this.$refs.builder.selectParent()}}),mounted:function(){window.addEventListener("mouseup",this.onMouseup)}},on=rn,an=(n("fc08"),Object(m["a"])(on,w,C,!1,null,null,null)),cn=an.exports;r["a"].use(y["a"]);var ln,dn,un=new y["a"]({routes:[{path:"/",name:"catalogs",component:cn}]}),hn={},gn=hn,fn="setSystemInfo",pn=Object(q["a"])({},fn,function(e,t){e.systemInfo=t}),mn=pn,vn={systemInfo:function(e){return e.systemInfo},languages:function(e){return 0===e.systemInfo.languages.length?e.systemInfo.languages:e.systemInfo.languages.map(function(e){return{text:e.name,value:e.cultureCode}})},locale:function(e){return e.systemInfo.currentCultureCode?e.systemInfo.currentCultureCode.substr(0,2):"en"}},bn=vn,yn="setSectionsInTree",wn="selectNode",Cn="setSectionWidth",_n="setSectionHeight",Sn="setDragInfo",xn="endDrag",Tn="setDragSectionGuid",In="moveDraggedNode",On="setSelectedStore",Dn="setStores",kn="addItemsToSectionInTree",jn={},Nn=jn,Gn=n("75fc"),Pn=(ln={},Object(q["a"])(ln,yn,function(e,t){var n=t.position,i=t.cat,s=t.elements,r=t.categoriesCount;n<0&&(e.treeSections=[]);var o=Object(d["a"])({categories:s,position:n,endOfList:s.length>=r||0===s.length,categoriesCount:r},i);e.displayedNode.hasChildren=o.categories.length>0,n!==e.treeSections.length?(e.treeSections[n]=o,e.treeSections=e.treeSections.slice(0,n+1)):e.treeSections.push(o)}),Object(q["a"])(ln,kn,function(e,t){var n=t.cat,i=t.elements,s=t.categoriesCount;n.categoriesCount=s,n.categories=[].concat(Object(Gn["a"])(n.categories),Object(Gn["a"])(i)),n.endOfList=n.categories>=s||0===i.length}),Object(q["a"])(ln,wn,function(e,t){var n=t.parentGuid,i=t.catGuid,s=n?e.treeSections.find(function(e){return e.guid===n}):e.treeSections[0];s.categories.forEach(function(t){t.guid===i?(t.selected=!0,t.displaying=!0,e.displayedNode!==t&&(e.displayedNode.displaying=!1),e.displayedNode=t):t.selected=!1})}),Object(q["a"])(ln,Cn,function(e,t){e.sectionWidth=t}),Object(q["a"])(ln,_n,function(e,t){e.sectionHeight=t}),Object(q["a"])(ln,Sn,function(e,t){e.dragInfo=t}),Object(q["a"])(ln,Tn,function(e,t){e.dragInfo.currentSectionGuid=t}),Object(q["a"])(ln,xn,function(e){e.dragInfo.dragging=!1}),Object(q["a"])(ln,In,function(e,t){var n=t.parentGuid,i=t.newIndex,s=e.treeSections.find(function(t){return t.guid===e.dragInfo.parentGuid}),r=e.treeSections.find(function(e){return e.guid===n});(r||s)&&(r?s?-1===i?r.categories.push(s.categories.splice(e.dragInfo.catIndex,1)[0]):r.categories.splice(i,0,s.categories.splice(e.dragInfo.catIndex,1)[0]):-1===i?r.categories.push(e.dragInfo.node):r.categories.splice(i,0,e.dragInfo.node):s.categories.splice(e.dragInfo.catIndex,1))}),Object(q["a"])(ln,On,function(e,t){e.selectedStore=t.value}),Object(q["a"])(ln,Dn,function(e,t){e.stores=t}),ln),$n=Pn,Mn={treeSections:function(e){return e.treeSections},sectionWidth:function(e){return e.sectionWidth},sectionHeight:function(e){return e.sectionHeight},dragInfo:function(e){return e.dragInfo},displayedNode:function(e){return e.displayedNode},displayedNodePosition:function(e){var t={section:0,index:0},n=e.treeSections.length;while(n--){var i=e.treeSections[n].categories.findIndex(function(e){return e.displaying});if(i>-1)return t.section=n,t.index=i,t}return t},selectedCatalog:function(e){return e.treeSections[0].categories.find(function(e){return e.selected})},selectedStore:function(e){return e.selectedStore},stores:function(e){return e.stores}},En=Mn,Hn={state:{treeSections:[],sectionWidth:280,sectionHeight:320,displayedNode:{},dragInfo:{node:null,parent:null,index:NaN,initPosition:{},dragging:!1},stores:[],selectedStore:null},getters:En,mutations:$n,actions:Nn,strict:!1},Ln={},Wn=Ln,Vn="setDetails",Bn="setCatalogDefinitions",Rn="setCategoryDefinitions",zn="setPriceGroups",Yn=(dn={},Object(q["a"])(dn,Vn,function(e,t){e.details=t}),Object(q["a"])(dn,Bn,function(e,t){e.catalogDefinitions=t}),Object(q["a"])(dn,Rn,function(e,t){e.categoryDefinitions=t}),Object(q["a"])(dn,zn,function(e,t){e.priceGroups=t}),dn),Un=Yn,An={details:function(e){return e.details},categoryDefinitions:function(e){return e.categoryDefinitions.map(function(e){return{text:e.name,value:e.guid}})},catalogDefinitions:function(e){return e.catalogDefinitions.map(function(e){return{text:e.name,value:e.guid}})},priceGroups:function(e){return e.priceGroups.map(function(e){return{text:e.name,value:e.guid}})}},Fn=An,Xn={state:{details:{},catalogDefinitions:[],categoryDefinitions:[],priceGroups:[]},getters:Fn,mutations:Un,actions:Wn,strict:!1};r["a"].use(g["b"]);var Jn=new g["b"].Store({state:{systemInfo:{languages:[]}},getters:bn,mutations:mn,actions:gn,modules:{builder:Object(d["a"])({namespaced:!0},Hn),details:Object(d["a"])({namespaced:!0},Xn)},strict:!1}),qn=n("74d6"),Kn=n.n(qn),Qn=n("30b2");r["a"].config.productionTip=!1;var Zn=Kn.a.create({baseURL:"/ucommerceapi/"});r["a"].prototype.axios=Zn,r["a"].filter("format",function(e,t,n){return e?(e=e.toString(),Object(Qn["a"])(e,t,Qn["b"][n])):""}),new r["a"]({router:un,store:Jn,render:function(e){return e(b)}}).$mount("#app")},"1e86":function(e,t,n){"use strict";var i=n("e272"),s=n.n(i);s.a},"24d2":function(e,t,n){},"30b2":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var i=n("70f2"),s=n.n(i);n.d(t,"a",function(){return s.a});var r={en:n("52cf"),da:n("eeea"),sv:n("8718"),de:n("6e0c")}},3308:function(e,t,n){},3708:function(e,t,n){"use strict";var i=n("3308"),s=n.n(i);s.a},"3d4d":function(e,t,n){"use strict";var i=n("a645"),s=n.n(i);s.a},"3f2a":function(e,t,n){},4962:function(e,t,n){},"525a":function(e,t,n){"use strict";var i=n("88ec"),s=n.n(i);s.a},6911:function(e,t,n){},"798d":function(e,t,n){"use strict";var i=n("dfa2"),s=n.n(i);s.a},"7c69":function(e,t,n){"use strict";var i=n("0682"),s=n.n(i);s.a},8030:function(e,t,n){},8677:function(e,t,n){},"88ec":function(e,t,n){},"8a31":function(e,t,n){},"8d7e":function(e,t,n){},9453:function(e,t,n){},a4f4:function(e,t,n){"use strict";var i=n("e29a"),s=n.n(i);s.a},a645:function(e,t,n){},a970:function(e,t,n){"use strict";var i=n("9453"),s=n.n(i);s.a},b0c5:function(e,t,n){"use strict";var i=n("8677"),s=n.n(i);s.a},b19a:function(e,t,n){"use strict";var i=n("8d7e"),s=n.n(i);s.a},b420:function(e,t,n){"use strict";var i=n("4962"),s=n.n(i);s.a},cef3:function(e,t,n){"use strict";var i=n("6911"),s=n.n(i);s.a},d20d:function(e,t,n){"use strict";var i=n("8a31"),s=n.n(i);s.a},d6b8:function(e,t,n){},dfa2:function(e,t,n){},e272:function(e,t,n){},e29a:function(e,t,n){},f0d6:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 18 15",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"m1.6 8 4.3 4.2 10.5-10.4",fill:"none","stroke-width":"3"}})])},s=[],r=n("2877"),o={},a=Object(r["a"])(o,i,s,!1,null,null,null);t["a"]=a.exports},f146:function(e,t,n){"use strict";var i=n("d6b8"),s=n.n(i);s.a},fc08:function(e,t,n){"use strict";var i=n("24d2"),s=n.n(i);s.a}});
//# sourceMappingURL=catalogs.2f2ac95a.js.map